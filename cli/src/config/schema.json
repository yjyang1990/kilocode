{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"title": "Kilo Code CLI Configuration",
	"description": "Configuration file for Kilo Code CLI",
	"type": "object",
	"required": ["version", "mode", "telemetry", "provider", "providers"],
	"properties": {
		"version": {
			"type": "string",
			"enum": ["1.0.0"],
			"description": "Configuration schema version"
		},
		"mode": {
			"type": "string",
			"default": "code",
			"description": "Default mode for the CLI"
		},
		"telemetry": {
			"type": "boolean",
			"default": false,
			"description": "Enable or disable telemetry"
		},
		"provider": {
			"type": "string",
			"description": "ID of the currently selected provider"
		},
		"providers": {
			"type": "array",
			"description": "List of configured providers",
			"items": {
				"$ref": "#/definitions/provider"
			}
		},
		"autoApproval": {
			"type": "object",
			"description": "Auto approval configuration for CLI operations",
			"properties": {
				"enabled": {
					"type": "boolean",
					"default": false,
					"description": "Global toggle for auto approval"
				},
				"read": {
					"type": "object",
					"description": "Auto approval settings for read operations",
					"properties": {
						"enabled": {
							"type": "boolean",
							"default": true,
							"description": "Auto approve read operations"
						},
						"outside": {
							"type": "boolean",
							"default": true,
							"description": "Auto approve reads outside workspace"
						}
					}
				},
				"write": {
					"type": "object",
					"description": "Auto approval settings for write operations",
					"properties": {
						"enabled": {
							"type": "boolean",
							"default": true,
							"description": "Auto approve write operations"
						},
						"outside": {
							"type": "boolean",
							"default": true,
							"description": "Auto approve writes outside workspace"
						},
						"protected": {
							"type": "boolean",
							"default": false,
							"description": "Auto approve writes to protected files"
						}
					}
				},
				"browser": {
					"type": "object",
					"description": "Auto approval settings for browser operations",
					"properties": {
						"enabled": {
							"type": "boolean",
							"default": false,
							"description": "Auto approve browser operations"
						}
					}
				},
				"retry": {
					"type": "object",
					"description": "Auto approval settings for retry operations",
					"properties": {
						"enabled": {
							"type": "boolean",
							"default": false,
							"description": "Auto approve retry operations"
						},
						"delay": {
							"type": "number",
							"minimum": 0,
							"default": 10,
							"description": "Delay in seconds before auto-approving retry"
						}
					}
				},
				"mcp": {
					"type": "object",
					"description": "Auto approval settings for MCP operations",
					"properties": {
						"enabled": {
							"type": "boolean",
							"default": true,
							"description": "Auto approve MCP operations"
						}
					}
				},
				"mode": {
					"type": "object",
					"description": "Auto approval settings for mode switching",
					"properties": {
						"enabled": {
							"type": "boolean",
							"default": true,
							"description": "Auto approve mode switches"
						}
					}
				},
				"subtasks": {
					"type": "object",
					"description": "Auto approval settings for subtask creation",
					"properties": {
						"enabled": {
							"type": "boolean",
							"default": true,
							"description": "Auto approve subtask creation"
						}
					}
				},
				"execute": {
					"type": "object",
					"description": "Auto approval settings for command execution",
					"properties": {
						"enabled": {
							"type": "boolean",
							"default": true,
							"description": "Auto approve command execution"
						},
						"allowed": {
							"type": "array",
							"items": {
								"type": "string"
							},
							"default": [],
							"description": "List of allowed commands (empty means all allowed)"
						},
						"denied": {
							"type": "array",
							"items": {
								"type": "string"
							},
							"default": [],
							"description": "List of denied commands"
						}
					}
				},
				"question": {
					"type": "object",
					"description": "Auto approval settings for followup questions",
					"properties": {
						"enabled": {
							"type": "boolean",
							"default": false,
							"description": "Auto approve followup questions"
						},
						"timeout": {
							"type": "number",
							"minimum": 0,
							"default": 60,
							"description": "Timeout in seconds before auto-approving question"
						}
					}
				},
				"todo": {
					"type": "object",
					"description": "Auto approval settings for todo list updates",
					"properties": {
						"enabled": {
							"type": "boolean",
							"default": true,
							"description": "Auto approve todo list updates"
						}
					}
				},
				"limits": {
					"type": "object",
					"description": "Auto approval limits",
					"properties": {
						"maxRequests": {
							"type": ["number", "null"],
							"minimum": 1,
							"default": null,
							"description": "Maximum number of auto-approved requests (null for unlimited)"
						},
						"maxCost": {
							"type": ["number", "null"],
							"minimum": 0,
							"default": null,
							"description": "Maximum cost for auto-approved requests (null for unlimited)"
						}
					}
				}
			}
		}
	},
	"definitions": {
		"provider": {
			"type": "object",
			"required": ["id", "provider"],
			"properties": {
				"id": {
					"type": "string",
					"description": "Unique identifier for this provider configuration"
				},
				"provider": {
					"type": "string",
					"enum": [
						"kilocode",
						"anthropic",
						"openai-native",
						"openrouter",
						"bedrock",
						"gemini",
						"vertex",
						"claude-code",
						"mistral",
						"groq",
						"deepseek",
						"xai",
						"cerebras",
						"ollama",
						"lmstudio",
						"vscode-lm",
						"openai",
						"glama",
						"huggingface",
						"litellm",
						"moonshot",
						"doubao",
						"chutes",
						"sambanova",
						"fireworks",
						"featherless",
						"deepinfra",
						"io-intelligence",
						"qwen-code",
						"gemini-cli",
						"zai",
						"unbound",
						"requesty",
						"roo",
						"vercel-ai-gateway",
						"virtual-quota-fallback",
						"human-relay",
						"fake-ai"
					]
				}
			},
			"allOf": [
				{
					"if": {
						"properties": { "provider": { "const": "kilocode" } }
					},
					"then": {
						"properties": {
							"kilocodeToken": {
								"type": "string",
								"description": "Kilocode API token"
							},
							"kilocodeModel": {
								"type": "string",
								"description": "Kilocode model ID"
							},
							"kilocodeOrganizationId": { "type": "string" }
						}
					}
				},
				{
					"if": {
						"properties": {
							"provider": { "const": "kilocode" },
							"kilocodeToken": { "type": "string", "minLength": 1 }
						},
						"required": ["kilocodeToken"]
					},
					"then": {
						"properties": {
							"kilocodeToken": { "minLength": 10 }
						}
					}
				},
				{
					"if": {
						"properties": {
							"provider": { "const": "kilocode" },
							"kilocodeModel": { "type": "string", "minLength": 1 }
						},
						"required": ["kilocodeModel"]
					},
					"then": {
						"properties": {
							"kilocodeModel": { "minLength": 1 }
						}
					}
				},
				{
					"if": {
						"properties": { "provider": { "const": "anthropic" } }
					},
					"then": {
						"properties": {
							"apiKey": {
								"type": "string",
								"description": "Anthropic API key"
							},
							"apiModelId": {
								"type": "string",
								"description": "Anthropic model ID"
							},
							"anthropicBaseUrl": { "type": "string" }
						}
					}
				},
				{
					"if": {
						"properties": {
							"provider": { "const": "anthropic" },
							"apiKey": { "type": "string", "minLength": 1 }
						},
						"required": ["apiKey"]
					},
					"then": {
						"properties": {
							"apiKey": { "minLength": 10 }
						}
					}
				},
				{
					"if": {
						"properties": {
							"provider": { "const": "anthropic" },
							"apiModelId": { "type": "string", "minLength": 1 }
						},
						"required": ["apiModelId"]
					},
					"then": {
						"properties": {
							"apiModelId": { "minLength": 1 }
						}
					}
				},
				{
					"if": {
						"properties": { "provider": { "const": "openai-native" } }
					},
					"then": {
						"properties": {
							"openAiNativeApiKey": {
								"type": "string",
								"description": "OpenAI Native API key"
							},
							"apiModelId": {
								"type": "string",
								"description": "OpenAI model ID"
							},
							"openAiNativeBaseUrl": { "type": "string" }
						}
					}
				},
				{
					"if": {
						"properties": {
							"provider": { "const": "openai-native" },
							"openAiNativeApiKey": { "type": "string", "minLength": 1 }
						},
						"required": ["openAiNativeApiKey"]
					},
					"then": {
						"properties": {
							"openAiNativeApiKey": { "minLength": 10 }
						}
					}
				},
				{
					"if": {
						"properties": { "provider": { "const": "openrouter" } }
					},
					"then": {
						"properties": {
							"openRouterApiKey": {
								"type": "string",
								"description": "OpenRouter API key"
							},
							"openRouterModelId": {
								"type": "string",
								"description": "OpenRouter model ID"
							},
							"openRouterBaseUrl": { "type": "string" }
						}
					}
				},
				{
					"if": {
						"properties": {
							"provider": { "const": "openrouter" },
							"openRouterApiKey": { "type": "string", "minLength": 1 }
						},
						"required": ["openRouterApiKey"]
					},
					"then": {
						"properties": {
							"openRouterApiKey": { "minLength": 10 }
						}
					}
				},
				{
					"if": {
						"properties": {
							"provider": { "const": "openrouter" },
							"openRouterModelId": { "type": "string", "minLength": 1 }
						},
						"required": ["openRouterModelId"]
					},
					"then": {
						"properties": {
							"openRouterModelId": { "minLength": 1 }
						}
					}
				},
				{
					"if": {
						"properties": { "provider": { "const": "ollama" } }
					},
					"then": {
						"properties": {
							"ollamaBaseUrl": {
								"type": "string",
								"description": "Ollama base URL"
							},
							"ollamaModelId": {
								"type": "string",
								"description": "Ollama model ID"
							},
							"ollamaApiKey": { "type": "string" }
						}
					}
				},
				{
					"if": {
						"properties": {
							"provider": { "const": "ollama" },
							"ollamaBaseUrl": { "type": "string", "minLength": 1 }
						},
						"required": ["ollamaBaseUrl"]
					},
					"then": {
						"properties": {
							"ollamaBaseUrl": { "minLength": 1 }
						}
					}
				},
				{
					"if": {
						"properties": {
							"provider": { "const": "ollama" },
							"ollamaModelId": { "type": "string", "minLength": 1 }
						},
						"required": ["ollamaModelId"]
					},
					"then": {
						"properties": {
							"ollamaModelId": { "minLength": 1 }
						}
					}
				},
				{
					"if": {
						"properties": { "provider": { "const": "openai" } }
					},
					"then": {
						"properties": {
							"openAiApiKey": {
								"type": "string",
								"description": "OpenAI API key"
							},
							"openAiBaseUrl": { "type": "string" },
							"apiModelId": { "type": "string" }
						}
					}
				},
				{
					"if": {
						"properties": {
							"provider": { "const": "openai" },
							"openAiApiKey": { "type": "string", "minLength": 1 }
						},
						"required": ["openAiApiKey"]
					},
					"then": {
						"properties": {
							"openAiApiKey": { "minLength": 10 }
						}
					}
				}
			]
		}
	}
}
